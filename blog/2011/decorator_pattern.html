
<!DOCTYPE html>
<html lang="en">
    <head>
        
        <title>Decorator Pattern | Amr Elroumy's Blog</title>
        <meta name="description" content="">
        <meta name="author" content="">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
                <!-- <link href="http://fonts.googleapis.com/css?family=Aldrich|Lato:400,400italic" rel="stylesheet" type="text/css"> -->
        <!-- <link href='http://fonts.googleapis.com/css?family=Alfa+Slab+One|PT+Sans' rel='stylesheet' type='text/css'> -->
        
                <link rel="stylesheet" href="/media/css/font-awesome.css">
        <link rel="stylesheet" href="/media/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="/media/css/style.css">
        
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

                    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src= "/media/js/jquery.timeago.min.js"></script>    
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery("time.timeago").timeago();
        });
    </script>

            <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'amrelroumysblog'; // required: replace example with your forum shortname
            
                        
            var disqus_identifier = 'fbbfae70-76aa-4360-9971-46fc58eb5290'; // Unique identifier for each blog post to identify the comment thread
                                                                                                       //   Instead of depending on unreliable post url which could be changed
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            
                <link rel="shortcut icon" href="/favicon.ico" />
            
            </head>

    <body>

        
        <!-- Blog Continer -->
        <div class="container-fluid">

            <!-- Blog Top Bar -->
                            <div id="topbar">
    <h2 id="topbar-title">
      <a href="/index.html">
          <div class="logo" ></div>
          Amr Elroumy's Blog
      </a>
  </h2>
</div>                        <!-- End Blog Top Bar -->

            <div class="row-fluid">
                <!-- Sidebar Menu -->
                                     <div class="span3" id="sidebar">
    <ul class="sidebar-menu sidebar-nav-fixed">
        <li>
            <div class="sidebar-menu-item-wrapper">
                <a href="/">
                    <i class="icon-home icon-white"></i>
                    <span>Home</span>
                </a>
            </div>
        </li>
        <li>
            <div class="sidebar-menu-item-wrapper">
                <a href="/blog/">
                    <i class="icon-list-alt icon-white"></i>
                    <span>Blog</span>
                </a>
            </div>
        </li>
        <li>
            <div class="sidebar-menu-item-wrapper">
                <a href="/about/">
                    <i class="icon-info-sign icon-white"></i>
                    <span>About Me</span>
                </a>
            </div>
        </li>
    </ul>
</div>                                <!-- End Sidebar Menu -->

                <div class="span9">
                    <div class="content"> 
                            <div class="row-fluid page-header">
        <div class="span9">
            <h1>
                Decorator Pattern
            </h1>
        </div>
        <div class="span3 date"><time class="timeago"
      datetime="2011-07-09T01:39:24Z"
      pubdate>
  <abbr class="published updated" title="2011-07-09T01:39:24Z">July 09, 2011</abbr>
</time>
</div>
    </div>
    <h1>Pattern&nbsp;Name</h1>
<p>Decorator&nbsp;Pattern</p>
<h1>Classification</h1>
<p>Structural&nbsp;Pattern</p>
<h1>Intent</h1>
<blockquote>
<p>The Decorator Pattern attaches additional responsibilities to an object dynamically. Decorators provide a flexible alternative to subclassing for extending&nbsp;functionality.</p>
</blockquote>
<h1>Also known&nbsp;as</h1>
<p>Wrapper</p>
<h1>Motivation</h1>
<p>You might find yourself while working on a project and in the need of adding/modifying responsibilities or behaviors to objects of a certain type. One way of approaching this problem is that we extend this type using inheritance and add the new behavior to it in its children. But what would happen when we want to add more than one responsibility for some objects while keeping others with only a single new responsibility? Then, we would have to implement all the combinations of these responsibilities and ending up with what can be called as a <strong>class explosion</strong>; as you’ll end up with a lot of classes, more time to debug and a lot of those long <span class="amp">&amp;</span> lonely nights of&nbsp;maintenance.</p>
<p>An answer to this problem would be to <strong>extend</strong> <strong>the behavior without using inheritance</strong>. This can be achieved by using <strong>composition</strong> to wrap the components by the decorator and add new behavior/properties or modify already existing ones in the runtime. Using this approach we can avoid having to use inheritance and constrain ourselves with static (compile-time) extending to the objects and use instead <strong>dynamic (runtime)</strong> extending of those specific objects. Also it allows us to add the needed behavior according to the specific conditions that occur during the runtime; meaning that objects of the same type can end up being decorated differently and that the same object can be wrapped in more than one&nbsp;decorator.</p>
<h3>Design principles behind this&nbsp;pattern:</h3>
<ul>
<li><strong>Open-Closed Principle</strong> from <span class="caps">SOLID</span> Principles Classes should be <strong>open</strong> <strong>for extension</strong>, but <strong>closed for modification</strong>. One reason why this principle is important is that it prevents us from introducing bugs into code that has already been tested and&nbsp;debugged.</li>
</ul>
<h3>Important&nbsp;Notes:</h3>
<ul>
<li>The decorator pattern is used to extend behavior of objects during the runtime not&nbsp;classes.</li>
<li>You can&#8217;t apply the <strong>Open-Closed Principle</strong> to every part of your design, because it&#8217;ll add complexity to the code and it&#8217;ll take time and effort. You need to identify—comes with experience—the parts of the code that are most likely to change and apply the principle on&nbsp;them.</li>
<li>Using decorators with code that relies on the component&#8217;s <strong>concrete</strong> type will break that code. But if we only use them with code that depends on the <strong>abstract</strong> component&#8217;s type, then the decorators will remain <strong>transparent</strong> to the client of the&nbsp;component.</li>
</ul>
<h1>Applicability (from GoF’s&nbsp;Book)</h1>
<ul>
<li>To add responsibilities to individual objects dynamically and transparently, that is, without affecting other&nbsp;objects. </li>
<li>For responsibilities that can be&nbsp;withdrawn. </li>
<li>When extension by subclassing is impractical. Sometimes a large number of independent extensions are possible and would produce an explosion of subclasses to support every combination. Or a class definition may be hidden or otherwise unavailable for&nbsp;subclassing. </li>
</ul>
<h1>Structure</h1>
<p><img alt="Decorator Pattern Structure" src="http://amrelroumy.files.wordpress.com/2011/07/decorator_pattern1.png"></p>
<p>You might ask yourself if the decorator pattern teaches us to favor composition over inheritance, then why does the <strong>DecoratorBase</strong> class extends the Object&#8217;s super class? The answer is that the decorator is extending this class to gain the same interface as the object it will wrap, not to gain the behavior. Thus we extend the base class to get the interface but we&#8217;re getting the behavior through composition of decorators with the base components as other&nbsp;decorators.</p>
<h1>Participants</h1>
<ul>
<li><strong>ComponentBase: </strong>Defines the basic behaviors/properties that would be implemented by the components that will be decorated. If we don’t want to define any actual functionality in it, you can use an interface instead of an abstract&nbsp;class.</li>
<li><strong>DecoratorBase: </strong>It is the abstract class for all the decorators. It inherits the basic interface of the components from the <strong>ConcreteBase</strong>, to allow the decorators to be used in place of the components. You’ll notice that it adds a constructor that accepts a <strong>Component</strong> of type <strong>ComponentBase; </strong>this is the Component to be&nbsp;wrapped.</li>
<li><strong>ConcreteComponent: </strong>The actual components that will be&nbsp;wrapped.</li>
<li><strong>ConcreteDecoratorA/</strong><strong>ConcreteDecoratorA: </strong>The decorators that wrap Components. They can introduce new behavior/properties like <strong>ConcreteDecoratorA </strong>or modify already existing ones like <strong>ConcretDecoratorB</strong>.</li>
</ul>
<h1>Properties of&nbsp;decorators:</h1>
<ul>
<li>They have the same supertype as the objects they&nbsp;decorate.</li>
<li>You can use one or more decorators to wrap an&nbsp;object.</li>
<li>The decorator adds its own behavior either before and/or after delegating to the object it decorates to do the rest of the&nbsp;job.</li>
<li>Objects can be decorated at&nbsp;runtime.</li>
</ul>
<h1>Consequences</h1>
<h3>Advantages of using the decorator&nbsp;pattern:</h3>
<ul>
<li>It allows us to add new behavior to existing code without the need to modify it (Following the Open-Closed Principle) or without having to use inheritance, thus avoiding inheritance’s rigidity and adding more flexibility to the&nbsp;code.</li>
<li>Avoids having classes with complicated and complex responsibilities high up in the class hierarchy. Instead we use simple classes that are customizable and whose responsibilities can be added during the&nbsp;runtime.</li>
</ul>
<h3>One of the shortcomings of using the Decorator&nbsp;Pattern:</h3>
<ul>
<li>Using this pattern in your design, you&#8217;ll end up with a relatively large number of small objects that differ in the way they are assembled. This can be overwhelming to a developer trying to use the Decorator-based <span class="caps">API</span>, but is easy to those who understand them and are familiar with this design&nbsp;pattern.</li>
<li>Using this pattern can complicate the process of instantiating objects, that&#8217;s why this pattern is used alongside the Factory and Builder&nbsp;patterns</li>
</ul>
<h1>Implementation</h1>
<p><div class="codebox"><figure class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ComponentBase</span><br /><span class="p">{</span><br />    <span class="k">public</span> <span class="k">abstract</span> <span class="k">void</span> <span class="nf">Operation</span><span class="p">();</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">public</span> <span class="k">class</span> <span class="nc">ConcreteComponent</span> <span class="p">:</span> <span class="n">ComponentBase</span><br /><span class="p">{</span><br />    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Operation</span><span class="p">()</span><br />    <span class="p">{</span><br />        <span class="c1">// Implementation of component&#39;s behavior</span><br />    <span class="p">}</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">DecoratorBase</span> <span class="p">:</span> <span class="n">ComponentBase</span><br /><span class="p">{</span><br />    <span class="k">private</span> <span class="n">ComponentBase</span> <span class="n">_componentObject</span><span class="p">;</span> <span class="c1">// The one to be extended</span><br />&nbsp;<br />    <span class="k">public</span> <span class="nf">DecoratorBase</span><span class="p">(</span><span class="n">ComponentBase</span> <span class="n">componentObject</span><span class="p">)</span><br />    <span class="p">{</span><br />       <span class="n">_componentObject</span> <span class="p">=</span> <span class="n">componentObject</span><span class="p">;</span><br />    <span class="p">}</span><br />&nbsp;<br />    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Operation</span><span class="p">()</span><br />    <span class="p">{</span><br />       <span class="n">_componentObject</span><span class="p">.</span><span class="n">Operation</span><span class="p">();</span><br />    <span class="p">}</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">public</span> <span class="k">class</span> <span class="nc">ConcreteDecorator</span> <span class="p">:</span> <span class="n">DecoratorBase</span><br /><span class="p">{</span><br />    <span class="k">public</span> <span class="nf">ConcreteDecorator</span><span class="p">(</span><span class="n">ComponentBase</span> <span class="n">componentObject</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">componentObject</span><span class="p">)</span><br />    <span class="p">{</span> <span class="p">}</span><br />&nbsp;<br />    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Operation</span><span class="p">()</span><br />    <span class="p">{</span><br />       <span class="c1">// Implementation of new behavior</span><br />       <span class="k">base</span><span class="p">.</span><span class="n">Operation</span><span class="p">();</span><br />       <span class="c1">// Implementation of new behavior</span><br />    <span class="p">}</span><br /><span class="p">}</span><br /></pre></div><br /><figcaption>C#</figcaption></figure></div></p>
<h1>Related Patterns (from GoF’s&nbsp;book)</h1>
<ul>
<li><strong>Adapter</strong> : A decorator is different from an adapter in that a decorator only changes an object&#8217;s responsibilities, not its interface; an adapter will give an object a completely new&nbsp;interface.</li>
<li><strong>Composite</strong> : A decorator can be viewed as a degenerate composite with only one component. However, a decorator adds additional responsibilities—it isn&#8217;t intended for object&nbsp;aggregation.</li>
<li><strong>Strategy </strong>: A decorator lets you change the skin of an object; a strategy lets you change the guts. These are two alternative ways of changing an&nbsp;object.</li>
</ul>
            <div id="disqussion_thread">
            <h2>Comments</h2>
            <div id="disqus_thread"></div>
        </div>
                       </div>
                </div>
            </div>

                        <div class="row-fluid">
                <div class="span12 site-footer">
                    ©2011-2012 <a href="/about">Amr Ahmed Elroumy</a> <br />Powered by <a href="https://github.com/hyde/hyde" title="The beast under the hood" target="_blank">Hyde</a>
                </div>
            </div>
            
        </div>
        <!-- End Blog Container -->

        
                    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33968631-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>            </body>
</html>