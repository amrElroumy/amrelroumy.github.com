
<!DOCTYPE html>
<html lang="en">
    <head>
        
        <title>Factory Method | Amr Elroumy's Blog</title>
        <meta name="description" content="">
        <meta name="author" content="">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
                <!-- <link href="http://fonts.googleapis.com/css?family=Aldrich|Lato:400,400italic" rel="stylesheet" type="text/css"> -->
        <!-- <link href='http://fonts.googleapis.com/css?family=Alfa+Slab+One|PT+Sans' rel='stylesheet' type='text/css'> -->
        
                <link rel="stylesheet" href="/media/css/font-awesome.css">
        <link rel="stylesheet" href="/media/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="/media/css/style.css">
        
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

                    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src= "/media/js/jquery.timeago.min.js"></script>    
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery("time.timeago").timeago();
        });
    </script>

            <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'amrelroumysblog'; // required: replace example with your forum shortname
            
                        
            var disqus_identifier = '41f7ca49-30f4-4f61-8e49-761e4d088339'; // Unique identifier for each blog post to identify the comment thread
                                                                                                       //   Instead of depending on unreliable post url which could be changed
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            
                <link rel="shortcut icon" href="/favicon.ico" />
            
            </head>

    <body>

        
        <!-- Blog Continer -->
        <div class="container-fluid">

            <!-- Blog Top Bar -->
                            <div id="topbar">
    <h2 id="topbar-title">
      <a href="/index.html">
          <div class="logo" ></div>
          Amr Elroumy's Blog
      </a>
  </h2>
</div>                        <!-- End Blog Top Bar -->

            <div class="row-fluid">
                <!-- Sidebar Menu -->
                                     <div class="span3" id="sidebar">
    <ul class="sidebar-menu sidebar-nav-fixed">
        <li>
            <div class="sidebar-menu-item-wrapper">
                <a href="/">
                    <i class="icon-home icon-white"></i>
                    <span>Home</span>
                </a>
            </div>
        </li>
        <li>
            <div class="sidebar-menu-item-wrapper">
                <a href="/blog/">
                    <i class="icon-list-alt icon-white"></i>
                    <span>Blog</span>
                </a>
            </div>
        </li>
        <li>
            <div class="sidebar-menu-item-wrapper">
                <a href="/about/">
                    <i class="icon-info-sign icon-white"></i>
                    <span>About Me</span>
                </a>
            </div>
        </li>
    </ul>
</div>                                <!-- End Sidebar Menu -->

                <div class="span9">
                    <div class="content"> 
                            <div class="row-fluid page-header">
        <div class="span9">
            <h1>
                Factory Method
            </h1>
        </div>
        <div class="span3 date"><time class="timeago"
      datetime="2011-07-20T07:49:55Z"
      pubdate>
  <abbr class="published updated" title="2011-07-20T07:49:55Z">July 20, 2011</abbr>
</time>
</div>
    </div>
    <h2>Pattern&nbsp;Name</h2>
<p>Factory&nbsp;Method</p>
<h2>Classification</h2>
<p>Creational&nbsp;Pattern</p>
<h2>Intent</h2>
<blockquote>
<p>Define an interface for creating an object, but let subclasses decide which class to instantiate. <strong>Factory Method</strong> lets a class defer instantiation to&nbsp;subclasses.</p>
</blockquote>
<h2>Also known&nbsp;as</h2>
<p>Virtual&nbsp;Constructor</p>
<h2>Motivation</h2>
<p>When we program to an implementation we risk making our code <strong>more fragile and less flexible</strong>. When we handle the instantiation of concrete classes explicitly, this is exactly what we are doing… By doing this, we subject our code to the severe impacts of change. One of these consequences is that we force ourselves to modify already existing code when we want to change the object creation routines or add new concrete classes, thus, breaching one of the <strong><span class="caps">OOD</span></strong>&nbsp;principles:</p>
<blockquote>
<p>“Your code should be open for extension but closed for&nbsp;modifications.”</p>
</blockquote>
<p>A common thing to do when we have a part of the code that is likely to change is&nbsp;to:</p>
<blockquote>
<p>“Identify the aspects that vary and separate them from what stays the&nbsp;same.”</p>
</blockquote>
<p>This is why we are needed to <strong>encapsulate</strong> the object creation and <strong>isolate</strong> it from the rest of the code, ensuring that any change in the object creation will remain transparent to the rest of the code. And here comes the role of the <strong>Factory Method pattern</strong>, as it handles the object creation and encapsulates it in a subclass. Thus, the client depends on the subclasses to handle all the object creation, so it doesn’t really know the kind of concrete product that is actually created and its code depends on an abstract&nbsp;product. </p>
<h3>Notes:</h3>
<ul>
<li>Factory Patterns in general focus on encapsulating the instantiation of concrete types; abstracting the product creation process, so that the type of the concrete product can be determined in the&nbsp;runtime.</li>
<li>There are two types of <strong>Factory Method</strong>:<ul>
<li>Parameterized: This can make more than one object based on the parameters passed to&nbsp;it.</li>
<li>Not parameterized: This can make only one&nbsp;object</li>
</ul>
</li>
<li>When using parameterized Factory Methods it is important to make sure that the parameters are “type safe” and ensure that errors in parameters are caught at compile time; to prevent runtime errors. E.g. we could use&nbsp;enumerators.</li>
<li><strong>Factory Method</strong> is similar to the <strong>Abstract Factory</strong> in that the methods of the <strong>Abstract factory</strong> can be implemented as <strong>Factory Methods</strong>. The main difference is that while abstract factory deals with an entire family of products, the <strong>Factory Method</strong> is only worried about a single product. Also <strong>Factory Methods</strong> use inheritance to get the concrete object as they delegate object creation to subclasses which implement the <strong>Factory Method</strong>, while <strong>Abstract Factory</strong> uses object&nbsp;composition.</li>
</ul>
<h1>Applicability</h1>
<blockquote>
<p>Use the <strong>Factory Method</strong> pattern when: <br>
  * a class can&#8217;t anticipate the class of objects it must create. 
  * a class wants its subclasses to specify the objects it creates. 
  * classes delegate responsibility to one of several helper subclasses, and you want to localize the knowledge of which helper subclass is the delegate.
<cite>(source: GoF’s Book)</cite></p>
</blockquote>
<h3>Important&nbsp;Note:</h3>
<p>Factories can only be used with a family of classes. If these classes doesn’t extend the same base or interface, then we can’t use factories with&nbsp;them.</p>
<h2>Structure</h2>
<p><img alt="Factory_Method" src="http://amrelroumy.files.wordpress.com/2011/07/factory_method2.png"></p>
<h2>Participants</h2>
<ul>
<li><strong>CreatorBase:</strong> If we don’t need to extend the creator and have different creators the whole factory can be implemented here. Otherwise, this base is either an interface or an abstract class; depending on the situation and if we want to add specify some simple functionality that the concrete creators&nbsp;inherit.</li>
<li><strong>ConcreteCreator:</strong> It inherits the <strong>CreatorBase</strong> class. It either uses the <strong>FactoryMethod</strong> as it is if it is implemented fully in the base class, or it overrides it with the suitable object creation&nbsp;code.</li>
<li><strong>ProductBase:</strong> This abstract class defines the type of products that the <strong>FactoryMethod </strong>can&nbsp;create.</li>
<li><strong>ConcreteProduct:</strong> The actual object that is created by the <strong>FactoryMethod</strong>.</li>
</ul>
<h2>Consequences</h2>
<h4>Advantages:</h4>
<ul>
<li>It enforces loose coupling between the Creator and the product. This is good, because it’ll allow us to add new products or change old ones without affecting our code or having to change it to fit into the new design as the code only deals with the product’s&nbsp;interface.</li>
<li>It allows us to encapsulate all the object creation procedures and use of constructors, leaving the object type and creation to be determined at the runtime instead of being hardwired in the&nbsp;code.</li>
<li>Using this pattern reinforces the principle of programming to an interface instead of an implementation, as we separate the object instantiation from the creators and are putting them in separate&nbsp;objects.</li>
<li><em>Provides hooks for subclasses.</em> Creating objects inside a class with a factory method is always more flexible than creating an object directly. Factory Method gives subclasses a hook for providing an extended version of an object. (Source: GoF’s&nbsp;book)</li>
</ul>
<h2>Implementation</h2>
<p><div class="codebox"><figure class="code"><div class="highlight"><pre><span class="k">abstract</span> <span class="k">class</span> <span class="nc">ProductBase</span><br /><span class="p">{</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">class</span> <span class="nc">ConcreteProductA</span> <span class="p">:</span> <span class="n">ProductBase</span><br /><span class="p">{</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">class</span> <span class="nc">ConcreteProductB</span> <span class="p">:</span> <span class="n">ProductBase</span><br /><span class="p">{</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">abstract</span> <span class="k">class</span> <span class="nc">CreatorBase</span><br /><span class="p">{</span><br />    <span class="k">public</span> <span class="k">enum</span> <span class="n">ProductType</span><br />    <span class="p">{</span><br />        <span class="n">TypeA</span><span class="p">,</span><br />        <span class="n">TypeB</span><br />    <span class="p">}</span><br />&nbsp;<br />    <span class="k">public</span> <span class="k">abstract</span> <span class="n">ProductBase</span> <span class="nf">FactoryMethod</span><span class="p">(</span><span class="n">ProductType</span> <span class="n">type</span><span class="p">);</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="k">class</span> <span class="nc">ConcreteCreator</span> <span class="p">:</span> <span class="n">CreatorBase</span><br /><span class="p">{</span><br />    <span class="k">public</span> <span class="k">override</span> <span class="n">ProductBase</span> <span class="nf">FactoryMethod</span><span class="p">(</span><span class="n">ProductType</span> <span class="n">type</span><span class="p">)</span><br />    <span class="p">{</span><br />        <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="p">==</span> <span class="n">ProductType</span><span class="p">.</span><span class="n">TypeA</span><span class="p">)</span><br />            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProductA</span><span class="p">();</span><br />        <span class="k">if</span><span class="p">(</span><span class="n">type</span> <span class="p">==</span> <span class="n">ProductType</span><span class="p">.</span><span class="n">TypeB</span><span class="p">)</span><br />            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProductB</span><span class="p">();</span><br />        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="err">“</span><span class="n">Invalid</span> <span class="n">argument</span><span class="err">”</span><span class="p">,</span> <span class="n">type</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span><br />    <span class="p">}</span><br /><span class="p">}</span><br /></pre></div><br /><figcaption>C#</figcaption></figure></div></p>
<h2>References</h2>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Design_Patterns">Design Patterns: Elements of Reusable Object-Oriented Software</a> – The Gang of Four (GoF): <a href="http://en.wikipedia.org/wiki/Erich_Gamma">Erich Gamma</a>, Richard Helm, <a href="http://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)">Ralph Johnson</a>, <a href="http://en.wikipedia.org/wiki/John_Vlissides">John M. Vlissides</a>. </li>
<li><a href="http://oreilly.com/catalog/9780596007126">Head First Design Patterns</a> - <a href="http://www.oreillynet.com/pub/au/2003">Eric T Freeman</a>, <a href="http://www.oreillynet.com/pub/au/2002">Elisabeth Robson</a>, <a href="http://www.oreillynet.com/pub/au/1085">Bert Bates</a>, <a href="http://www.oreillynet.com/pub/au/1084">Kathy Sierra</a>. </li>
</ul>
            <div id="disqussion_thread">
            <h2>Comments</h2>
            <div id="disqus_thread"></div>
        </div>
                       </div>
                </div>
            </div>

                        <div class="row-fluid">
                <div class="span12 site-footer">
                    ©2011-2012 <a href="/about">Amr Ahmed Elroumy</a> <br />Powered by <a href="https://github.com/hyde/hyde" title="The beast under the hood" target="_blank">Hyde</a>
                </div>
            </div>
            
        </div>
        <!-- End Blog Container -->

        
                    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33968631-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>            </body>
</html>