<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="title" content="Factory Method | Amr Elroumy's Blog">
  <meta name="description" content="None">
  <meta name="author" content="Amr Elroumy">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Factory Method | Amr Elroumy's Blog</title>

  <!-- Le favicon -->
  <link rel="shortcut icon" href="../../../favicon.ico">

  <!-- Le styles -->
  <link rel="stylesheet" href="../../../assets/css/bootstrap.css">
  <link rel="stylesheet" href="../../../assets/css/bootstrap-responsive.css">
  <!-- <link rel="stylesheet" href="/assets/css/colorbox.css"> -->
  <!-- <link rel="stylesheet" href="/assets/css/slides.css"> -->
  <link rel="stylesheet" href="../../../assets/css/fonts.css">
  <link rel="stylesheet" href="../../../assets/css/font-awesome.css">
  <link rel="stylesheet" href="../../../assets/css/pygments.css">
  <link rel="stylesheet" href="../../../assets/css/style.css">
  <link rel="stylesheet" href="../../../assets/css/component.css">


  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
      <![endif]-->
      
      <!-- Le fonts -->
      
      <!-- <link href="http://fonts.googleapis.com/css?family=Aldrich|Lato:400,400italic" rel="stylesheet" type="text/css"> -->
      <!-- <link href='http://fonts.googleapis.com/css?family=Alfa+Slab+One|PT+Sans' rel='stylesheet' type='text/css'> -->
      

      
      
    </head>
    <body>

      
      <ul id="vertical-menu" class="vertical-menu">
    <li><a href="../../../" class="icon-logo" title="Home">Home</a></li>
    <li><a href="../../../about.html" class="icon-user" title="About Me">About Me</a></li>
    
    <li><a href="../../../archive.html" class="icon-cabinet" title="Archive">Archive</a></li>
    
    <li><a href="../../../categories/index.html" class="icon-tags" title="Tags">Tags</a></li>
    
    <li>
        <a href="http://feedburner.google.com/fb/a/mailverify?uri=AmrElroumysBlog&amp;loc=en_US" class="icon-envelope" title="Subscribe by Mail" onclick="window.open( 'http://feedburner.google.com/fb/a/mailverify?uri=AmrElroumysBlog&amp;loc=en_US', 'popupwindow', 'scrollbars=yes,width=660,height=600,resizable=yes,toolbar=no,directories=no,location=no,menubar=no,status=no'); return false">Subscribe</a>
    </li>
    <li><a href="../../../rss.xml" class="icon-feed" title="RSS Feed">RSS</a></li>
    
    <li><a href="#" class="icon-pencil" title="Blog Roll">Blog Roll</a>
        <ul class="vertical-submenu">
            
            <li><a href="http://abdelrahmanogail.wordpress.com/" target="_blank">Abdelrahman Elogeel's Blog</a></li>
            
            <li><a href="http://acmascis.org/blog/" target="_blank">acmASCIS' Blog</a></li>
            
            <li><a href="http://anasmehassab.wordpress.com/" target="_blank">Anas Awad's T-Blog</a></li>
            
            <li><a href="http://ferasferas.wordpress.com/" target="_blank">Feras' Blog</a></li>
            
            <li><a href="http://iamsamy.blogspot.com/" target="_blank">Mohamed Samy's thoughts</a></li>
            
            <li><a href="http://mhesham.wordpress.com/" target="_blank">Muhammad Hesham's Blog</a></li>
            
        </ul>
    </li>
</ul>
      <!-- Blog Continer -->
      <div class="container-fluid" id="container">
        <!-- Blog navbar Bar -->
        
        <div class="header" style="margin-bottom: 16px;">
  <h1 style="max-width: 800px;  margin: 0 auto;  padding-top: 36px;font-style: normal;font-weight: inherit;color: #999999;font-size: 20px;">Amr Elroumy's Blog</h1>
  <h3 style="max-width: 800px;  margin: 0 auto;padding-top: 2px;font-style: normal;">Science, Programming &amp; Personal Encounters</h3>
</div>
<div style="
    max-width: 77%;
    margin: auto;
">
<div style="
    width: 10.7%;
    height: 5px;
    background-color: #f6c99a;
    display: inline;
    float: left;
"></div>
<div style="
    background-color: #bfdab3;
    height: 5px;
    display: inline;
    float: left;
    width: 78.3%;
"></div>
<div style="
    width: 10.7%;      
    height: 5px;      background-color: #f6c99a;      display: inline;      float: left;
"></div>
</div>
        
        <!-- End Blog navbar Bar -->

        <div class="container">

         <div class="content" style="max-width: 800px; margin: 0 auto; padding-top:70px;"> 
          <!--Body content-->
          
    <div class="postbox">
    <h1><a class="post-title" href="#">Factory Method</a></h1>
    
    <hr>
    <small>
        Posted: July 20, 2011  |  

        

        
            More posts about
            
                <a href="../../../categories/Design%20Patterns.html"><span class="badge badge-info">Design Patterns</span></a>
            
                <a href="../../../categories/OOP.html"><span class="badge badge-info">OOP</span></a>
            
                <a href="../../../categories/programming.html"><span class="badge badge-info">programming</span></a>
            
        
    </small>
    <hr>
    <h3>Pattern Name</h3>
<p>Factory Method</p>
<h3>Classification</h3>
<p>Creational Pattern</p>
<h3>Intent</h3>
<blockquote>
<p>Define an interface for creating an object, but let subclasses decide which class to instantiate. <strong>Factory Method</strong> lets a class defer instantiation to subclasses.</p>
</blockquote>
<h3>Also known as</h3>
<p>Virtual Constructor</p>
<h3>Motivation</h3>
<p>When we program to an implementation we risk making our code <strong>more fragile and less flexible</strong>. When we handle the instantiation of concrete classes explicitly, this is exactly what we are doing… By doing this, we subject our code to the severe impacts of change. One of these consequences is that we force ourselves to modify already existing code when we want to change the object creation routines or add new concrete classes, thus, breaching one of the <strong>OOD</strong> principles:</p>
<blockquote>
<p>“Your code should be open for extension but closed for modifications.”</p>
</blockquote>
<p>A common thing to do when we have a part of the code that is likely to change is to:</p>
<blockquote>
<p>“Identify the aspects that vary and separate them from what stays the same.”</p>
</blockquote>
<p>This is why we are needed to <strong>encapsulate</strong> the object creation and <strong>isolate</strong> it from the rest of the code, ensuring that any change in the object creation will remain transparent to the rest of the code. And here comes the role of the <strong>Factory Method pattern</strong>, as it handles the object creation and encapsulates it in a subclass. Thus, the client depends on the subclasses to handle all the object creation, so it doesn’t really know the kind of concrete product that is actually created and its code depends on an abstract product. </p>
<h4>Notes:</h4>
<ul>
<li>Factory Patterns in general focus on encapsulating the instantiation of concrete types; abstracting the product creation process, so that the type of the concrete product can be determined in the runtime.</li>
<li>There are two types of <strong>Factory Method</strong>:<ul>
<li>Parameterized: This can make more than one object based on the parameters passed to it.</li>
<li>Not parameterized: This can make only one object</li>
</ul>
</li>
<li>When using parameterized Factory Methods it is important to make sure that the parameters are “type safe” and ensure that errors in parameters are caught at compile time; to prevent runtime errors. E.g. we could use enumerators.</li>
<li><strong>Factory Method</strong> is similar to the <strong>Abstract Factory</strong> in that the methods of the <strong>Abstract factory</strong> can be implemented as <strong>Factory Methods</strong>. The main difference is that while abstract factory deals with an entire family of products, the <strong>Factory Method</strong> is only worried about a single product. Also <strong>Factory Methods</strong> use inheritance to get the concrete object as they delegate object creation to subclasses which implement the <strong>Factory Method</strong>, while <strong>Abstract Factory</strong> uses object composition.</li>
</ul>
<h2>Applicability</h2>
<blockquote>
<p>Use the <strong>Factory Method</strong> pattern when:   </p>
<ul>
<li>a class can't anticipate the class of objects it must create. </li>
<li>a class wants its subclasses to specify the objects it creates. </li>
<li>classes delegate responsibility to one of several helper subclasses, and you want to localize the knowledge of which helper subclass is the delegate.
<cite>(source: GoF’s Book)</cite></li>
</ul>
</blockquote>
<h4>Important Note:</h4>
<p>Factories can only be used with a family of classes. If these classes doesn’t extend the same base or interface, then we can’t use factories with them.</p>
<h3>Structure</h3>
<p><img alt="Factory_Method" src="http://amrelroumy.files.wordpress.com/2011/07/factory_method2.png"></p>
<h3>Participants</h3>
<ul>
<li><strong>CreatorBase:</strong> If we don’t need to extend the creator and have different creators the whole factory can be implemented here. Otherwise, this base is either an interface or an abstract class; depending on the situation and if we want to add specify some simple functionality that the concrete creators inherit.</li>
<li><strong>ConcreteCreator:</strong> It inherits the <strong>CreatorBase</strong> class. It either uses the <strong>FactoryMethod</strong> as it is if it is implemented fully in the base class, or it overrides it with the suitable object creation code.</li>
<li><strong>ProductBase:</strong> This abstract class defines the type of products that the <strong>FactoryMethod </strong>can create.</li>
<li><strong>ConcreteProduct:</strong> The actual object that is created by the <strong>FactoryMethod</strong>.</li>
</ul>
<h3>Consequences</h3>
<h5>Advantages:</h5>
<ul>
<li>It enforces loose coupling between the Creator and the product. This is good, because it’ll allow us to add new products or change old ones without affecting our code or having to change it to fit into the new design as the code only deals with the product’s interface.</li>
<li>It allows us to encapsulate all the object creation procedures and use of constructors, leaving the object type and creation to be determined at the runtime instead of being hardwired in the code.</li>
<li>Using this pattern reinforces the principle of programming to an interface instead of an implementation, as we separate the object instantiation from the creators and are putting them in separate objects.</li>
<li><em>Provides hooks for subclasses.</em> Creating objects inside a class with a factory method is always more flexible than creating an object directly. Factory Method gives subclasses a hook for providing an extended version of an object. (Source: GoF’s book)</li>
</ul>
<h3>Implementation</h3>
<div class="code"><pre><span class="k">abstract</span> <span class="k">class</span> <span class="nc">ProductBase</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">ConcreteProductA</span> <span class="p">:</span> <span class="n">ProductBase</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">ConcreteProductB</span> <span class="p">:</span> <span class="n">ProductBase</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">abstract</span> <span class="k">class</span> <span class="nc">CreatorBase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">enum</span> <span class="n">ProductType</span>
    <span class="p">{</span>
        <span class="n">TypeA</span><span class="p">,</span>
        <span class="n">TypeB</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">abstract</span> <span class="n">ProductBase</span> <span class="nf">FactoryMethod</span><span class="p">(</span><span class="n">ProductType</span> <span class="n">type</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">ConcreteCreator</span> <span class="p">:</span> <span class="n">CreatorBase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="n">ProductBase</span> <span class="nf">FactoryMethod</span><span class="p">(</span><span class="n">ProductType</span> <span class="n">type</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="p">==</span> <span class="n">ProductType</span><span class="p">.</span><span class="n">TypeA</span><span class="p">)</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProductA</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">type</span> <span class="p">==</span> <span class="n">ProductType</span><span class="p">.</span><span class="n">TypeB</span><span class="p">)</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProductB</span><span class="p">();</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="err">“</span><span class="n">Invalid</span> <span class="n">argument</span><span class="err">”</span><span class="p">,</span> <span class="n">type</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3>References</h3>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Design_Patterns">Design Patterns: Elements of Reusable Object-Oriented Software</a> – The Gang of Four (GoF): <a href="http://en.wikipedia.org/wiki/Erich_Gamma">Erich Gamma</a>, Richard Helm, <a href="http://en.wikipedia.org/wiki/Ralph_Johnson_(computer_scientist)">Ralph Johnson</a>, <a href="http://en.wikipedia.org/wiki/John_Vlissides">John M. Vlissides</a>. </li>
<li><a href="http://oreilly.com/catalog/9780596007126">Head First Design Patterns</a> - <a href="http://www.oreillynet.com/pub/au/2003">Eric T Freeman</a>, <a href="http://www.oreillynet.com/pub/au/2002">Elisabeth Robson</a>, <a href="http://www.oreillynet.com/pub/au/1085">Bert Bates</a>, <a href="http://www.oreillynet.com/pub/au/1084">Kathy Sierra</a>. </li>
</ul>
    <ul class="pager">
    
        <li class="previous">
            <a href="decorator-pattern.html">← Previous post</a>
        </li>
    
    
        <li class="next">
            <a href="../08/singleton-pattern.html">Next post →</a>
        </li>
    
    </ul>
    
        <div id="disqus_thread"></div>
        <script type="text/javascript"> var disqus_shortname = 'amrelroumysblog'; var disqus_url = 'http://amrelroumy.github.io/posts/2011/07/factory-method.html'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>

          <!--End of body content-->
          <hr>
          <div class="footer"><small>© 2011-2013 <a href="mailto:amr.elroumy@gmail.com">Amr Elroumy</a><br>Some rights reserved (<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" rel="license">CC BY-NC-SA 3.0</a>)<br>Powered by <a href="http://nikola.ralsina.com.ar" target="_blank">Nikola</a> - Original theme by <a href="http://thomaspark.me/" target="_blank">Thomas Park</a></small></div>
        </div>
      </div>

   <!--    
      <div class="row-fluid">
        <div class="span12 site-footer">
          ©2011-2012 <a href="/about">Amr Elroumy</a> <br />Powered by <a href="https://github.com/hyde/hyde" title="The beast under the hood" target="_blank">Hyde</a>
        </div>
      </div>
       -->

    </div>
    <!-- End Blog Container -->

    

<!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="../../../assets/js/jquery-1.9.1.min.js" type="text/javascript"></script>
  <script src="../../../assets/js/bootstrap.min.js" type="text/javascript"></script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$','$$'], ["\\\[","\\\]"] ]},
    displayAlign: 'center', // Change this to 'center' to center equations.
    "HTML-CSS": {
      styles: {
        "font-size":  "120%"},
        scale: 120}
      });
  </script>
  
  <script>
  (function() {
    var cx = '000224632386531530640:6f01ofvavgy';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
  </script>
  <search></search>

  <script src="../../../assets/js/mathjax.js" type="text/javascript"></script>

  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33968631-1']);
  _gaq.push(['_setDomainName', 'amrelroumy.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


</body>
</html>